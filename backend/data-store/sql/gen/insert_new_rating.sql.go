// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.24.0
// source: insert_new_rating.sql

package queries

import (
	"context"
)

const createProjectRating = `-- name: CreateProjectRating :one
insert into project.rating (
    "submission_id",
    "assessor_id",
    "is_draft",
    "type"
) values (
    $1,
    (
        select assessor_id from project.assessor_submission
            where is_leading = true and submission_id = $1
    ),
    $2,
    $3
) returning rating_id, submission_id, assessor_id, is_draft, type, custom_est_assessment_time
`

type CreateProjectRatingParams struct {
	SubmissionID int32
	IsDraft      bool
	Type         ProjectRatingType
}

func (q *Queries) CreateProjectRating(ctx context.Context, arg CreateProjectRatingParams) (ProjectRating, error) {
	row := q.db.QueryRow(ctx, createProjectRating, arg.SubmissionID, arg.IsDraft, arg.Type)
	var i ProjectRating
	err := row.Scan(
		&i.RatingID,
		&i.SubmissionID,
		&i.AssessorID,
		&i.IsDraft,
		&i.Type,
		&i.CustomEstAssessmentTime,
	)
	return i, err
}
